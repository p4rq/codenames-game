{"ast":null,"code":"import axios from'axios';const API_URL='http://localhost:8080/api';/**\r\n * Makes a GET request to the API\r\n * @param {string} endpoint - API endpoint\r\n * @param {object} params - Query parameters\r\n * @returns {Promise<any>} - Response data\r\n */export const get=async function(endpoint){let params=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};const url=new URL(`${API_URL}${endpoint}`);// Add query parameters\nObject.keys(params).forEach(key=>{if(params[key]!==undefined&&params[key]!==null){url.searchParams.append(key,params[key]);}});const response=await fetch(url.toString());if(!response.ok){throw new Error(`API error: ${response.status}`);}return response.json();};/**\r\n * Makes a POST request to the API\r\n * @param {string} endpoint - API endpoint\r\n * @param {object} data - Request body data\r\n * @returns {Promise<any>} - Response data\r\n */export const post=async function(endpoint){let data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};const response=await fetch(`${API_URL}${endpoint}`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(data)});if(!response.ok){throw new Error(`API error: ${response.status}`);}return response.json();};// Generate random user ID for this session\nconst USER_ID=`user-${Math.floor(Math.random()*10000)}`;const api=axios.create({baseURL:process.env.REACT_APP_API_URL||'',timeout:10000,headers:{'Content-Type':'application/json'}});// Intercept responses to handle common errors\napi.interceptors.response.use(response=>response,error=>{console.error('API Error:',error);return Promise.reject(error);});const apiMethods={// Game operations\ncreateGame:async username=>{const response=await api.post(`/game/start`,{creator_id:USER_ID,username:username||'Anonymous'});return response.data;},joinGame:async(gameId,username,team)=>{const response=await api.post(`/game/join`,{game_id:gameId,player_id:USER_ID,username:username||'Anonymous',team:team||'red'});return response.data;},getGameState:async gameId=>{const response=await api.get(`/game/state?id=${gameId}`);return response.data;},setSpymaster:async gameId=>{const response=await api.post(`/game/set-spymaster?game_id=${gameId}&player_id=${USER_ID}`);return response.data;},revealCard:async(gameId,cardId)=>{const response=await api.post(`/game/reveal`,{game_id:gameId,card_id:cardId,player_id:USER_ID});return response.data;},endTurn:async gameId=>{const response=await api.post(`/game/end-turn?game_id=${gameId}&player_id=${USER_ID}`);return response.data;},// Chat operations\nsendMessage:async(gameId,username,content)=>{const response=await api.post(`/chat/send`,{content:content,sender_id:USER_ID,username:username||'Anonymous',chat_id:gameId});return response.data;},getMessages:async gameId=>{const response=await api.get(`/chat/messages?chat_id=${gameId}`);return response.data;},// Helper method to get current user ID\ngetUserId:()=>USER_ID};export default apiMethods;","map":{"version":3,"names":["axios","API_URL","get","endpoint","params","arguments","length","undefined","url","URL","Object","keys","forEach","key","searchParams","append","response","fetch","toString","ok","Error","status","json","post","data","method","headers","body","JSON","stringify","USER_ID","Math","floor","random","api","create","baseURL","process","env","REACT_APP_API_URL","timeout","interceptors","use","error","console","Promise","reject","apiMethods","createGame","username","creator_id","joinGame","gameId","team","game_id","player_id","getGameState","setSpymaster","revealCard","cardId","card_id","endTurn","sendMessage","content","sender_id","chat_id","getMessages","getUserId"],"sources":["C:/Users/anuarbek/codenames-game/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API_URL = 'http://localhost:8080/api';\r\n\r\n/**\r\n * Makes a GET request to the API\r\n * @param {string} endpoint - API endpoint\r\n * @param {object} params - Query parameters\r\n * @returns {Promise<any>} - Response data\r\n */\r\nexport const get = async (endpoint, params = {}) => {\r\n  const url = new URL(`${API_URL}${endpoint}`);\r\n  \r\n  // Add query parameters\r\n  Object.keys(params).forEach(key => {\r\n    if (params[key] !== undefined && params[key] !== null) {\r\n      url.searchParams.append(key, params[key]);\r\n    }\r\n  });\r\n  \r\n  const response = await fetch(url.toString());\r\n  \r\n  if (!response.ok) {\r\n    throw new Error(`API error: ${response.status}`);\r\n  }\r\n  \r\n  return response.json();\r\n};\r\n\r\n/**\r\n * Makes a POST request to the API\r\n * @param {string} endpoint - API endpoint\r\n * @param {object} data - Request body data\r\n * @returns {Promise<any>} - Response data\r\n */\r\nexport const post = async (endpoint, data = {}) => {\r\n  const response = await fetch(`${API_URL}${endpoint}`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify(data),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    throw new Error(`API error: ${response.status}`);\r\n  }\r\n  \r\n  return response.json();\r\n};\r\n\r\n// Generate random user ID for this session\r\nconst USER_ID = `user-${Math.floor(Math.random() * 10000)}`;\r\n\r\nconst api = axios.create({\r\n  baseURL: process.env.REACT_APP_API_URL || '',\r\n  timeout: 10000,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  }\r\n});\r\n\r\n// Intercept responses to handle common errors\r\napi.interceptors.response.use(\r\n  response => response,\r\n  error => {\r\n    console.error('API Error:', error);\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nconst apiMethods = {\r\n  // Game operations\r\n  createGame: async (username) => {\r\n    const response = await api.post(`/game/start`, {\r\n      creator_id: USER_ID,\r\n      username: username || 'Anonymous'\r\n    });\r\n    return response.data;\r\n  },\r\n\r\n  joinGame: async (gameId, username, team) => {\r\n    const response = await api.post(`/game/join`, {\r\n      game_id: gameId,\r\n      player_id: USER_ID,\r\n      username: username || 'Anonymous',\r\n      team: team || 'red'\r\n    });\r\n    return response.data;\r\n  },\r\n\r\n  getGameState: async (gameId) => {\r\n    const response = await api.get(`/game/state?id=${gameId}`);\r\n    return response.data;\r\n  },\r\n\r\n  setSpymaster: async (gameId) => {\r\n    const response = await api.post(`/game/set-spymaster?game_id=${gameId}&player_id=${USER_ID}`);\r\n    return response.data;\r\n  },\r\n\r\n  revealCard: async (gameId, cardId) => {\r\n    const response = await api.post(`/game/reveal`, {\r\n      game_id: gameId,\r\n      card_id: cardId,\r\n      player_id: USER_ID\r\n    });\r\n    return response.data;\r\n  },\r\n\r\n  endTurn: async (gameId) => {\r\n    const response = await api.post(`/game/end-turn?game_id=${gameId}&player_id=${USER_ID}`);\r\n    return response.data;\r\n  },\r\n\r\n  // Chat operations\r\n  sendMessage: async (gameId, username, content) => {\r\n    const response = await api.post(`/chat/send`, {\r\n      content: content,\r\n      sender_id: USER_ID,\r\n      username: username || 'Anonymous',\r\n      chat_id: gameId\r\n    });\r\n    return response.data;\r\n  },\r\n\r\n  getMessages: async (gameId) => {\r\n    const response = await api.get(`/chat/messages?chat_id=${gameId}`);\r\n    return response.data;\r\n  },\r\n\r\n  // Helper method to get current user ID\r\n  getUserId: () => USER_ID\r\n};\r\n\r\nexport default apiMethods;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}